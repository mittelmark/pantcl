<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Detlef Groth, Caputh-Schwielowsee, Germany" />
  <meta name="dcterms.date" content="2023-04-15" />
  <title>filter-geasy.tcl documentation</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="mini.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">filter-geasy.tcl documentation</h1>
<p class="author">Detlef Groth, Caputh-Schwielowsee, Germany</p>
<p class="date">2023-04-15</p>
</header>
<hr />
<p></p>
<p>Cannot open ../lib/tclfilters/header.md</p>
<hr />
<h2 id="name">Name</h2>
<p><em>filter-geasy.tcl</em> - Filter which can be used to evaluate <a href="http://bloodgate.com/perl/graph/manual/">Graph-Easy</a> code within a Pandoc processed document using the Tcl filter driver <code>pantcl</code> using user provided filter written in Tcl.</p>
<h2 id="description">Description</h2>
<p>This is a filter supporting an easy to use command line based diagramming tool. The <code>graph-easy</code> command line application can be installed using your package manager on Unix system like this on Fedora Linux <code>sudo dnf install perl-Graph-Easy</code> or on Ubuntu/Debian <code>sudo apt-get install -y libgraph-easy-perl</code>.</p>
<p>Please note that this filter mainly exists mainly to demonstrate how to use an external pandoc filter written in the Tcl programming without adding it directly to the pantcl executable.</p>
<h2 id="usage">Usage</h2>
<p>Graph-Easy code is embedded into Markup languages like Markdown like this (remove the spaces at the beginning, they are here just for protecting the evaluation):</p>
<pre><code>     # code chunk defaults (must be in fact not given):
     ```{.geasy eval=true echo=true}
     [Bonn] - car -&gt; [Berlin]
     ```</code></pre>
<p>Where <code>eval</code> and <code>echo</code> are so called chunk options. Please note that this is an external filter, to use the filter your actual need to point in your YAML header to the filter implementation, see below for more informatian.</p>
<p>The conversion of the Markdown documents via Pandoc should be then done as follows:</p>
<pre><code>pantcl input.md output.html  -s</code></pre>
<p>The application file <em>pantcl</em> which contains the Tcl filter and all other filters has to be placed in the PATH and the system has to support the Shebang, on Unix this is standard on Windows you need to use tools like Cygwin, Msys, Git-Bash or Cygwin (untested).</p>
<p>The arguments after the output file are delegated to pandoc.</p>
<p>If code blocks with the <code>.geasy</code> marker are found, the contents in the code block is processed via the graph-easy command line application.</p>
<p>The following options can be given via code chunks or in the YAML header.</p>
<blockquote>
<ul>
<li>app - the command line application to be called, usually <code>grap-easy</code>, default: graph-easy</li>
<li>as - the output format default, ascii, other options are boxart, dot, default: ascii</li>
<li>echo - should the graph easy source code be shown, default: true|1</li>
<li>eval - should the code in the code block be evaluated, default: false|0</li>
<li>ext - the image filetype to be generated if output <code>as</code> is <code>dot</code>, either png, pdf, svg usually, default: svg</li>
<li>results - should the output of the command line application been shown, should be show or hide, default: “show”</li>
</ul>
</blockquote>
<p>To change the defaults the YAML header can be used. Here an example to change the You should set eval to 1 as shown as well below, the term true might produce an error, so write <code>eval: 1</code></p>
<pre><code> ----
 title: &quot;filter-geasy.tcl documentation&quot;
 author: &quot;Detlef Groth, Caputh-Schwielowsee, Germany&quot;
 date: 2023-04-15
 geasy:
     app: graph-easy
     eval: 1
     filter: user/filter-geasy.tcl
     ext: svg
 ----</code></pre>
<h2 id="examples">Examples</h2>
<p>Here an example for a simple diagram with chunk options <code>{.geasy eval=true}</code>:.</p>
<pre class="geasy" data-eval="true"><code>[Bonn] - car -&gt; [Berlin]</code></pre>
<pre class="geasyout" data-eval="true"><code>+------+  car   +--------+
| Bonn | -----&gt; | Berlin |
+------+        +--------+</code></pre>
<p>Using the option <code>{.geasy eval=true results="hide"}</code> the output of the command line tool can be hidden.</p>
<pre class="geasy" data-eval="true" data-results="hide"><code>[Bonn] - car -&gt; [Berlin]</code></pre>
<p>Using the option <code>{.geasy eval=true as="boxart"}</code> we can try to use Unicode boxart characters.</p>
<pre class="geasy" data-eval="true" as="boxart"><code>[Bonn] - car -&gt; [Berlin]</code></pre>
<pre class="geasyout" data-eval="true" as="boxart"><code>┌──────┐  car   ┌────────┐
│ Bonn │ ─────&gt; │ Berlin │
└──────┘        └────────┘</code></pre>
<p>Using the option <code>{.geasy eval=true as="dot"}</code> we can as well output a SVG graphic. Please note that this needs an installed GraphViz dot interpreter which must be in the PATH.</p>
<pre class="geasy" data-eval="true" as="dot"><code>[Bonn] - car -&gt; [Berlin]</code></pre>
<pre class="geasyout" data-eval="true" as="dot"><code>digraph GRAPH_0 {

  // Generated by Graph::Easy 0.76 at Mon Apr 17 07:19:10 2023

  edge [ arrowhead=open ];
  graph [ rankdir=LR ];
  node [
    fillcolor=white,
    fontsize=11,
    shape=box,
    style=filled ];

  Bonn -&gt; Berlin [ color=&quot;#000000&quot;, fontcolor=&quot;#000000&quot;, label=car ]

}</code></pre>
<p><img src="/home/groth/workspace/pantcl/scripts/geasy-4.svg" /></p>
<p>In this case we usually like to hide the digraph code output we can to this by writing results=“hide” as code chunk option. Consulting the tutorial page for graph-easy syntax we can as well see that we can set some display options for nodes etc. the code chunk options here are: <code>{.geasy eval=true as="dot" results="hide"}</code></p>
<pre class="geasy" data-eval="true" as="dot" data-results="hide"><code>[ Paris ]   { shape: ellipse; fill: salmon; }
-- Flight --&gt;
[ Bonn  ]   { shape: circle; fill: skyblue; }
-- Car --&gt;  { color: red; }
[ Berlin ]  { fill: rgb(255,228,221); }</code></pre>
<p><img src="/home/groth/workspace/pantcl/scripts/geasy-5.svg" /></p>
<p>The default filetype is svg, but we can as well change this to png by using the chunk option <code>ext=png</code>.</p>
<pre class="geasy" data-eval="true" as="dot" data-results="hide" data-ext="png"><code>[ PNG-Output ]
[ Paris ]   { shape: ellipse; fill: salmon; }
-- Flight --&gt;
[ Bonn  ]   { shape: circle; fill: skyblue; }
-- Car --&gt;  { color: red; }
[ Berlin ]  { fill: rgb(255,228,221); }</code></pre>
<p><img src="/home/groth/workspace/pantcl/scripts/geasy-6.png" /></p>
<h2 id="see-also">See also:</h2>
<ul>
<li><a href="../README.html">pantcl Readme</a></li>
<li><a href="../pantcl.html">pantcl manual</a></li>
<li><a href="../pantcl-tutorial.html">pantcl Tutorial</a> - information on your own filter implementation</li>
</ul>
</body>
</html>
